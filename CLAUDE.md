# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**astra-methodology** is a Claude Code plugin that implements the ASTRA (AI-augmented Sprint Through Rapid Assembly) methodology. It provides Sprint 0 project initialization, data standard enforcement, naming validation, and quality gates for Korean enterprise software development.

This is NOT an application codebase — it is a Claude Code plugin consisting of skills, agents, hooks, commands, and scripts that get installed into target projects.

## Repository Structure

```
astra-methodology/
├── skills/              # Claude Code skills (invoked via /command)
│   ├── astra-methodology/      # Sprint 0 project scaffolding (/astra-methodology)
│   ├── astra-sprint/    # Sprint initialization (/astra-sprint)
│   ├── astra-guide/     # Quick reference guide (/astra-guide)
│   ├── astra-checklist/ # Sprint 0 completion verification (/astra-checklist)
│   ├── astra-global-setup/  # Global dev environment setup (/astra-global-setup)
│   ├── astra-integration-test/ # Chrome MCP integration testing (/astra-integration-test)
│   └── data-standard/   # Korean public data standard terminology
├── agents/              # Specialized Claude Code agents
│   ├── naming-validator.md  # DB naming standard validation agent
│   └── astra-verifier.md   # ASTRA methodology compliance checker (read-only)
├── commands/            # Slash commands
│   ├── generate-entity.md   # /generate-entity — entity code from Korean definitions
│   ├── check-naming.md      # /check-naming — DB naming standard compliance check
│   └── lookup-term.md       # /lookup-term — standard term dictionary lookup
├── hooks/               # PostToolUse hooks (hooks.json)
├── scripts/             # Shell scripts for hooks and verification
├── data/                # Standard dictionary JSON files
│   ├── standard_terms.json    # 13,176 standard terms (Korean→English abbreviation)
│   ├── standard_words.json    # 3,284 standard words (abbreviations, forbidden words)
│   └── standard_domains.json  # 123 standard domains (type codes, lengths)
└── .claude-plugin/      # Plugin manifest (plugin.json)
```

## Key Concepts

### ASTRA Methodology

- **VIP Principles**: Vibe-driven Development, Instant Feedback Loop, Plugin-powered Quality
- **Sprint cycle**: 1 week
- **Team roles**: VA (Vibe Architect), PE (Prompt Engineer), DE (Domain Expert), DSA (Design System Architect)
- **Quality Gates**: Gate 1 (write-time/automatic), Gate 2 (review-time), Gate 2.5 (design review), Gate 3 (release-time)

### Korean Public Data Standard (행정안전부 공공데이터 공통표준)

The plugin enforces naming conventions from the Korean Ministry of the Interior and Safety's public data standard dictionary. Key rules:

- **Table prefixes**: `TB_` (general), `TC_` (code), `TH_` (history), `TL_` (log), `TR_` (relation)
- **Column suffixes**: `_YMD` (date), `_DT` (datetime), `_AMT` (amount), `_NM` (name), `_CD` (code), `_NO` (number), `_CN` (content), `_YN` (yes/no), `_SN` (sequence), `_ADDR` (address)
- **Forbidden words**: `standard_words.json` contains a `금칙어목록` field; violations trigger warnings with standard alternatives

### Hooks Architecture

`hooks/hooks.json` defines PostToolUse hooks that run automatically after Write/Edit operations:
1. **check-forbidden-words.sh** — scans DB-related files for forbidden words from the standard dictionary
2. **validate-naming.sh** — checks table name prefixes in SQL, Java (@Table), TypeScript (@Entity), Python (__tablename__)
3. Both hooks are non-blocking (exit 0) — they emit warnings only

### Target Project Structure (generated by /astra-methodology)

When the plugin initializes a target project, it creates:
```
{project}/
├── CLAUDE.md                          # Project-specific AI rules
├── docs/
│   ├── design-system/                 # Design tokens, components, layout grid
│   ├── blueprints/                    # Feature design documents
│   ├── database/                      # DB design (SSoT), naming rules, migrations
│   ├── tests/                         # Test strategy, test cases, test reports
│   ├── prompts/                       # Sprint prompt maps
│   ├── retrospectives/               # Sprint retrospectives
│   └── delivery/                     # Release artifacts
└── src/
```

## Development Notes

- All skill files use YAML frontmatter for metadata (`name`, `description`, `allowed-tools`, etc.)
- Agent files specify `tools`, `disallowedTools`, `model`, and `maxTurns` in frontmatter
- The plugin uses `$ARGUMENTS` and `$CLAUDE_PLUGIN_ROOT` as runtime variables
- Scripts receive tool input via stdin as JSON (parsed with `jq`)
- All user-facing text is in Korean (code comments excluded)
- The `data/` JSON files are large (13K+ terms) — use targeted `jq` queries rather than loading entirely

## Scripts

```bash
# Verify Sprint 0 setup (checks global settings + project structure)
./scripts/verify-setup.sh [project-root-path]

# Initialize project directory structure only (no template content)
./scripts/init-project.sh [project-root-path]

# Hook scripts (not invoked directly — called by hooks.json)
./scripts/check-forbidden-words.sh   # stdin: JSON tool input
./scripts/validate-naming.sh         # stdin: JSON tool input
```

## Conventions

- Skill SKILL.md files follow a strict procedural format (단계: step-by-step instructions)
- Commands are simpler than skills — they define input/output format and delegate to data files
- The astra-verifier agent is read-only (`disallowedTools: Write, Edit`) and uses haiku model
- Hook scripts must always `exit 0` to avoid blocking the user's workflow
- `standard_terms.json` fields: `공통표준용어명` (Korean term), `공통표준용어영문약어명` (English abbreviation), `공통표준도메인명` (domain)
- `standard_words.json` fields: `공통표준단어명` (word), `공통표준단어영문약어명` (abbreviation), `금칙어목록` (forbidden words), `이음동의어목록` (synonyms)
